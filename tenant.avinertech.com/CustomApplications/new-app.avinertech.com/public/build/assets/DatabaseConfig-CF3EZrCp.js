import{d as i,e as E,o as B,r as _,c as u,a as d,b as A,f as t,g as y,p as M,i as h,n as S,t as v,j as N,w as c,v as m,C as P}from"./app-Ccdyq44E.js";import{u as R}from"./vue-router-D5UoYQoY.js";import{S as C}from"./SchemaService-CqcMUZkb.js";import V from"./MessageBox-B6lWDncq.js";/* empty css            */const O={class:"space-y-8"},U={class:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20"},j={class:"space-y-4"},z={class:"flex items-center justify-between p-4 bg-white/5 rounded-lg"},F={class:"flex items-center justify-between p-4 bg-white/5 rounded-lg"},H=["disabled"],W={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},$={class:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20"},L={class:"relative"},q=["type"],G={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J={class:"pt-4"},K=["disabled"],oe={__name:"DatabaseConfig",setup(Q){const T=R(),g=i(!1),r=i(!1),b=i(!1),s=i(null),p=i(null),x=i("info"),l=i({DATABASE_HOST:"",DATABASE_PORT:"",DATABASE_NAME:"",DATABASE_USERNAME:"",DATABASE_PASSWORD:""}),k=E(()=>({"text-red-400":s.value==="Not Connected","text-yellow-400":s.value==="Testing Connection","text-green-400":s.value==="Connected"}));B(async()=>{try{const o=window.location.host,e=await C.getTenantConfig(o);if(e.status==="success"&&e.data)for(const a of e.data)l.value[a==null?void 0:a.name]=(a==null?void 0:a.value)||""}catch{f("Failed to load database configuration","error")}});const f=(o,e="info")=>{p.value=o,x.value=e},w=async()=>{r.value=!0,s.value="Testing Connection";try{await new Promise(o=>setTimeout(o,2e3)),s.value=Math.random()>.3?"Connected":"Connection Failed"}catch(o){console.error("Failed to test connection:",o),s.value="Connection Failed"}finally{r.value=!1}},D=async()=>{var o;g.value=!0;try{if(await w(),(o=s.value)!=null&&o.success){const e=window.location.host;await C.storeSchema(e,[]),f("Database configuration saved successfully","success"),T.push("/setup")}else throw new Error("Please ensure the database connection is valid before saving")}catch(e){f(e.message||"Failed to save database configuration","error")}finally{g.value=!1}};return(o,e)=>{const a=_("router-link");return d(),u("div",O,[A(V,{show:!!p.value,message:p.value,type:x.value,onClose:e[0]||(e[0]=n=>p.value=null)},null,8,["show","message","type"]),e[19]||(e[19]=t("div",{class:"flex items-center justify-between"},[t("h1",{class:"text-3xl font-bold text-white"},"Database Configuration")],-1)),t("div",U,[e[11]||(e[11]=t("h2",{class:"text-xl font-semibold text-white mb-4"},"Database Configuration",-1)),t("div",j,[t("div",z,[e[8]||(e[8]=t("div",null,[t("h3",{class:"text-white font-medium"},"Database Settings"),t("p",{class:"text-sm text-gray-400"},"Configure database connection")],-1)),A(a,{to:"/setup/database",class:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-lg transition-colors"},{default:M(()=>e[7]||(e[7]=[h(" Configure ")])),_:1,__:[7]})]),t("div",F,[t("div",null,[e[9]||(e[9]=t("h3",{class:"text-white font-medium"},"Connection Status",-1)),t("p",{class:S(["text-sm",k.value])},v(s.value),3)]),t("button",{onClick:w,disabled:r.value,class:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[r.value?(d(),u("svg",W,e[10]||(e[10]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):y("",!0),h(" "+v(r.value?"Testing...":"Test Connection"),1)],8,H)])])]),t("div",$,[t("form",{onSubmit:N(D,["prevent"]),class:"space-y-6"},[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Database Host",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.DATABASE_HOST=n),type:"text",class:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"localhost"},null,512),[[m,l.value.DATABASE_HOST]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Database Port",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>l.value.DATABASE_PORT=n),type:"number",class:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"3306"},null,512),[[m,l.value.DATABASE_PORT]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Database Name",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>l.value.DATABASE_NAME=n),type:"text",class:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"my_database"},null,512),[[m,l.value.DATABASE_NAME]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Database Username",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>l.value.DATABASE_USERNAME=n),type:"text",class:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"db_user"},null,512),[[m,l.value.DATABASE_USERNAME]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Database Password",-1)),t("div",L,[c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=n=>l.value.DATABASE_PASSWORD=n),type:b.value?"text":"password",class:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"••••••••"},null,8,q),[[P,l.value.DATABASE_PASSWORD]]),t("button",{type:"button",onClick:e[6]||(e[6]=n=>b.value=!b.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white"},[b.value?(d(),u("svg",G,e[16]||(e[16]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)]))):(d(),u("svg",I,e[17]||(e[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])])]),t("div",J,[t("button",{type:"button",onClick:w,class:"w-full px-4 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-300 rounded-lg transition-colors",disabled:r.value||g.value},v(r.value?"Testing Connection...":"Test Connection"),9,K)])],32)]),s.value?(d(),u("div",{key:0,class:S(["p-4 rounded-lg border",s.value.success?"bg-green-500/20 border-green-500/30 text-green-300":"bg-red-500/20 border-red-500/30 text-red-300"])},v(s.value.message),3)):y("",!0)])}}};export{oe as default};
