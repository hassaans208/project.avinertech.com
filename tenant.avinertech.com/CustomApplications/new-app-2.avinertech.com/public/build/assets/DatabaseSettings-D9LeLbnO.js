import{d as a,e as h,o as x,c,a as u,f as t,g as m,b as f,p as w,i as p,u as y,S as C,n as S,t as d}from"./app-yE3FpRTR.js";import{S as A}from"./SchemaService-D2A_x8Vm.js";import _ from"./DatabaseConfigForm-HjVfqd_7.js";/* empty css            */const T={class:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20"},D={class:"space-y-4"},k={class:"flex items-center justify-between p-4 bg-white/5 rounded-lg"},B={class:"flex items-center justify-between p-4 bg-white/5 rounded-lg"},E=["disabled"],N={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},M={class:"flex items-center justify-between p-4 bg-white/5 rounded-lg"},F={key:0,class:"mt-6"},R={__name:"DatabaseSettings",setup(V){const l=a(!1);a(!1);const i=a(!1);a(!1);const o=a(null),r=a({DATABASE_HOST:"localhost",DATABASE_PORT:"3306",DATABASE_NAME:"",DATABASE_USERNAME:"",DATABASE_PASSWORD:""}),v=h(()=>({"text-red-400":o.value==="Not Connected","text-yellow-400":o.value==="Testing Connection","text-green-400":o.value==="Connected"}));x(async()=>{try{const s=window.location.host,e=await A.getTenantConfig(s);if(e.status==="success"&&e.data)for(const n of e.data)r.value[n==null?void 0:n.name]=(n==null?void 0:n.value)||""}catch(s){console.error("Failed to load database configuration:",s)}});const b=async()=>{i.value=!0,o.value="Testing Connection";try{await new Promise(s=>setTimeout(s,2e3)),o.value=Math.random()>.3?"Connected":"Connection Failed"}catch(s){console.error("Failed to test connection:",s),o.value="Connection Failed"}finally{i.value=!1}},g=async s=>{try{r.value={...s},l.value=!1}catch(e){console.error("Failed to save database configuration:",e)}};return(s,e)=>(u(),c("div",T,[e[6]||(e[6]=t("h2",{class:"text-xl font-semibold text-white mb-4"},"Database Settings",-1)),t("div",D,[t("div",k,[e[2]||(e[2]=t("div",null,[t("h3",{class:"text-white font-medium"},"Database Schema"),t("p",{class:"text-sm text-gray-400"},"Manage your database models and relationships")],-1)),f(y(C),{href:s.route("setup.schema"),class:"px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 rounded-lg transition-colors"},{default:w(()=>e[1]||(e[1]=[p(" Manage Schema ")])),_:1,__:[1]},8,["href"])]),t("div",B,[t("div",null,[e[3]||(e[3]=t("h3",{class:"text-white font-medium"},"Connection Status",-1)),t("p",{class:S(["text-sm",v.value])},d(o.value||"Not Connected"),3)]),t("button",{onClick:b,disabled:i.value,class:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[i.value?(u(),c("svg",N,e[4]||(e[4]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),p(" "+d(i.value?"Testing...":"Test Connection"),1)],8,E)]),t("div",M,[e[5]||(e[5]=t("div",null,[t("h3",{class:"text-white font-medium"},"Database Configuration"),t("p",{class:"text-sm text-gray-400"},"Configure database connection settings")],-1)),t("button",{onClick:e[0]||(e[0]=n=>l.value=!l.value),class:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-lg transition-colors"},d(l.value?"Cancel":"Configure"),1)])]),l.value?(u(),c("div",F,[f(_,{"initial-data":r.value,onSave:g},null,8,["initial-data"])])):m("",!0)]))}};export{R as default};
