import{s as A,l as _,d as v,e as E,o as L,c as l,a as n,f as e,g,u,t as d,F as C,h as P,n as f,w as x,v as D,k as $,i as S,j as T}from"./app-yE3FpRTR.js";/* empty css            */const R=A("users",{state:()=>({users:[],user:null,loading:!1,error:null,pagination:{currentPage:1,perPage:10,total:0},sortBy:"name",sortDirection:"asc"}),getters:{getUserById:c=>s=>c.users.find(i=>i.id===s)},actions:{async fetchUsers(){var c,s;this.loading=!0;try{const i=await _.get("/api/users",{params:{per_page:this.pagination.perPage,sort_by:this.sortBy,sort_direction:this.sortDirection,page:this.pagination.currentPage}});i.data.success&&(this.users=i.data.data.data,this.pagination={currentPage:i.data.data.current_page,perPage:i.data.data.per_page,total:i.data.data.total}),this.error=null}catch(i){this.error=((s=(c=i.response)==null?void 0:c.data)==null?void 0:s.message)||"Failed to fetch users"}finally{this.loading=!1}},async createUser(c){var s,i,p,b;this.loading=!0;try{const r=await _.post("/api/users",c);return r.data.success&&await this.fetchUsers(),{success:!0,data:r.data.data}}catch(r){return this.error=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to create user",{success:!1,errors:((b=(p=r.response)==null?void 0:p.data)==null?void 0:b.errors)||{message:this.error}}}finally{this.loading=!1}},async updateUser(c,s){var i,p,b,r;this.loading=!0;try{const o=await _.put(`/api/users/${c}`,s);return o.data.success&&await this.fetchUsers(),{success:!0,data:o.data.data}}catch(o){return this.error=((p=(i=o.response)==null?void 0:i.data)==null?void 0:p.message)||"Failed to update user",{success:!1,errors:((r=(b=o.response)==null?void 0:b.data)==null?void 0:r.errors)||{message:this.error}}}finally{this.loading=!1}},async deleteUser(c){var s,i;this.loading=!0;try{return(await _.delete(`/api/users/${c}`)).data.success&&await this.fetchUsers(),{success:!0}}catch(p){return this.error=((i=(s=p.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to delete user",{success:!1,error:this.error}}finally{this.loading=!1}},setSort(c){this.sortBy===c?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=c,this.sortDirection="asc"),this.fetchUsers()},setPage(c){this.pagination.currentPage=c,this.fetchUsers()}}}),z={class:"flex"},I={class:"flex-1 overflow-x-auto"},O={class:"mb-4 flex justify-between items-center"},q={key:0,class:"py-8 text-center"},G={key:1,class:"py-8 text-center"},H={class:"text-red-500"},J={key:2,class:"overflow-x-auto shadow-md rounded-lg"},K={class:"min-w-full bg-white"},Q={class:"bg-gray-50"},W=["onClick"],X={key:0},Y={class:"divide-y divide-gray-200"},Z={class:"px-6 py-4 whitespace-nowrap"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"px-6 py-4 whitespace-nowrap"},se={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},re=["onClick"],oe=["onClick"],le={key:0},ne={key:3,class:"flex justify-between items-center mt-4"},ie={class:"text-sm text-gray-500"},de={class:"flex space-x-1"},ue=["onClick"],ce={class:"flex justify-between items-center mb-6"},pe={class:"text-lg font-medium"},me={class:"mb-4"},ge={key:0,class:"mt-1 text-sm text-red-600"},be={class:"mb-4"},fe={key:0,class:"mt-1 text-sm text-red-600"},ve={class:"mb-4"},ye={key:0,class:"mt-1 text-sm text-red-600"},xe={class:"mb-4"},he={key:0,class:"mt-1 text-sm text-red-600"},we={class:"mb-4"},ke={key:0,class:"mt-1 text-sm text-red-600"},_e={class:"mt-6"},Ue=["disabled"],Ce={key:0,class:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"},Pe={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},De={class:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full"},Se={class:"mb-6"},Me={class:"flex justify-end space-x-3"},Be=["disabled"],$e={key:0,class:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"},je={__name:"UserList",setup(c){const s=R(),i=[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"role",label:"Role"},{key:"status",label:"Status"}],p=v(!1),b=v("create"),r=v({name:"",email:"",password:"",role:"user",status:"pending"}),o=v({}),h=v(!1),w=v(!1),y=v(null),k=v(!1),F=E(()=>Math.ceil(s.pagination.total/s.pagination.perPage));L(()=>{s.fetchUsers()});function M(m,t=null){b.value=m,p.value=!0,o.value={},m==="edit"&&t?(r.value={...t},r.value.password=""):r.value={name:"",email:"",password:"",role:"user",status:"pending"}}async function V(){h.value=!0,o.value={};try{let m;b.value==="create"?m=await s.createUser(r.value):m=await s.updateUser(r.value.id,r.value),m.success?p.value=!1:o.value=m.errors||{}}catch(m){console.error("Failed to save user:",m)}finally{h.value=!1}}function j(m){y.value=m,w.value=!0}async function N(){if(y.value){k.value=!0;try{(await s.deleteUser(y.value.id)).success&&(w.value=!1,y.value=null)}catch(m){console.error("Failed to delete user:",m)}finally{k.value=!1}}}return(m,t)=>{var B;return n(),l("div",z,[e("div",I,[e("div",O,[t[9]||(t[9]=e("h2",{class:"text-xl font-semibold"},"Users",-1)),e("button",{onClick:t[0]||(t[0]=a=>M("create")),class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Add User ")]),u(s).loading?(n(),l("div",q,t[10]||(t[10]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"Loading...",-1)]))):u(s).error?(n(),l("div",G,[e("p",H,d(u(s).error),1),e("button",{onClick:t[1]||(t[1]=a=>u(s).fetchUsers()),class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Retry ")])):(n(),l("div",J,[e("table",K,[e("thead",Q,[e("tr",null,[(n(),l(C,null,P(i,a=>e("th",{key:a.key,onClick:U=>u(s).setSort(a.key),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[S(d(a.label)+" ",1),u(s).sortBy===a.key?(n(),l("span",X,d(u(s).sortDirection==="asc"?"↑":"↓"),1)):g("",!0)],8,W)),64)),t[11]||(t[11]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",Y,[(n(!0),l(C,null,P(u(s).users,a=>(n(),l("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",Z,d(a.name),1),e("td",ee,d(a.email),1),e("td",te,[e("span",{class:f(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":a.role==="admin","bg-blue-100 text-blue-800":a.role==="manager","bg-gray-100 text-gray-800":a.role==="user"}])},d(a.role),3)]),e("td",se,[e("span",{class:f(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":a.status==="active","bg-yellow-100 text-yellow-800":a.status==="pending","bg-red-100 text-red-800":a.status==="inactive"}])},d(a.status),3)]),e("td",ae,[e("button",{onClick:U=>M("edit",a),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Edit ",8,re),e("button",{onClick:U=>j(a),class:"text-red-600 hover:text-red-900"}," Delete ",8,oe)])]))),128)),u(s).users.length===0?(n(),l("tr",le,t[12]||(t[12]=[e("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500"}," No users found ",-1)]))):g("",!0)])])])),u(s).pagination.total>0?(n(),l("div",ne,[e("div",ie," Showing "+d((u(s).pagination.currentPage-1)*u(s).pagination.perPage+1)+" to "+d(Math.min(u(s).pagination.currentPage*u(s).pagination.perPage,u(s).pagination.total))+" of "+d(u(s).pagination.total)+" users ",1),e("div",de,[(n(!0),l(C,null,P(F.value,a=>(n(),l("button",{key:a,onClick:U=>u(s).setPage(a),class:f(["px-3 py-1 rounded",u(s).pagination.currentPage===a?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"])},d(a),11,ue))),128))])])):g("",!0)]),p.value?(n(),l("div",{key:0,class:f(["w-96 border-l border-gray-200 bg-white p-4 fixed right-0 top-0 h-full shadow-xl transform transition-transform duration-300",{"translate-x-0":p.value,"translate-x-full":!p.value}])},[e("div",ce,[e("h3",pe,d(b.value==="create"?"Add New User":"Edit User"),1),e("button",{onClick:t[2]||(t[2]=a=>p.value=!1),class:"text-gray-500 hover:text-gray-700"},t[13]||(t[13]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:T(V,["prevent"])},[e("div",me,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.name=a),type:"text",class:f(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o.value.name}])},null,2),[[D,r.value.name]]),o.value.name?(n(),l("p",ge,d(o.value.name[0]),1)):g("",!0)]),e("div",be,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.value.email=a),type:"email",class:f(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o.value.email}])},null,2),[[D,r.value.email]]),o.value.email?(n(),l("p",fe,d(o.value.email[0]),1)):g("",!0)]),e("div",ve,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Password",-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.password=a),type:"password",class:f(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o.value.password}])},null,2),[[D,r.value.password]]),o.value.password?(n(),l("p",ye,d(o.value.password[0]),1)):g("",!0)]),e("div",xe,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Role",-1)),x(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.role=a),class:f(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o.value.role}])},t[17]||(t[17]=[e("option",{value:"admin"},"Admin",-1),e("option",{value:"manager"},"Manager",-1),e("option",{value:"user"},"User",-1)]),2),[[$,r.value.role]]),o.value.role?(n(),l("p",he,d(o.value.role[0]),1)):g("",!0)]),e("div",we,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),x(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.status=a),class:f(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o.value.status}])},t[19]||(t[19]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"pending"},"Pending",-1)]),2),[[$,r.value.status]]),o.value.status?(n(),l("p",ke,d(o.value.status[0]),1)):g("",!0)]),e("div",_e,[e("button",{type:"submit",class:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:h.value},[h.value?(n(),l("span",Ce)):g("",!0),S(" "+d(b.value==="create"?"Create User":"Update User"),1)],8,Ue)])],32)],2)):g("",!0),w.value?(n(),l("div",Pe,[e("div",De,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium mb-4"},"Confirm Deletion",-1)),e("p",Se,'Are you sure you want to delete user "'+d((B=y.value)==null?void 0:B.name)+'"? This action cannot be undone.',1),e("div",Me,[e("button",{onClick:t[8]||(t[8]=a=>w.value=!1),class:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-100"}," Cancel "),e("button",{onClick:N,class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",disabled:k.value},[k.value?(n(),l("span",$e)):g("",!0),t[21]||(t[21]=S(" Delete "))],8,Be)])])])):g("",!0)])}}};export{je as default};
